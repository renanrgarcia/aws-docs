# IAM Policies

- **IAM Policy**: A document that defines permissions for actions on AWS resources. Policies are written in JSON and specify what actions are allowed or denied on which resources.
- Policies can be attached to IAM users, groups, or roles to grant them the specified permissions.
- There are two types of policies:

  - **Managed Policies**: Standalone policies that can be attached to multiple users, groups, or roles. AWS provides a set of predefined managed policies, and you can also create your own.
  - **Inline Policies**: Policies that are embedded directly into a single user, group, or role. Inline policies are specific to the entity they are attached to and cannot be reused.

- Example:
  ```json
  {
    "Version": "2012-10-17", // The version of the policy language
    "Id": "ExamplePolicy", // An optional identifier for the policy
    "Statement": [
      // The permissions granted by the policy
      {
        "Sid": "ExampleStatement", // An optional identifier for the statement
        "Effect": "Allow", // Specifies whether the statement allows or denies access
        "Principal": {
          // The principal to which the policy applies
          "AWS": "arn:aws:iam::123456789012:user/ExampleUser"
        },
        "Action": [
          // The actions that are allowed or denied
          "s3:GetObject",
          "s3:PutObject"
        ],
        "Resource": [
          // The resources to which the actions apply
          "arn:aws:s3:::example-bucket/*"
        ]
        "Condition": {
          // Optional conditions for the policy
          "StringEquals": {
            "s3:x-amz-acl": "public-read"
          }
        }
      },
      {
        "Sid": "AnotherStatement", // Another statement in the policy
        "Effect": "Allow", // This statement also allows access
        "Action": "ec2:DescribeInstances", // Action to describe EC2 instances
        "Resource": "*" // Applies to all resources
      }
    ]
  }
  ```

## Password Policy

- You can set a password policy for your AWS account to enforce specific password requirements for IAM users.
- Password policy settings include:
  - Minimum password length
  - Password complexity requirements (e.g., uppercase letters, lowercase letters, numbers, and symbols)
  - Password expiration and rotation settings
  - Multi-factor authentication (MFA) requirements
- We can require users to change their password after a specified number of days.
- We can allow the users to change their own password.
- We can prevent the reuse of previous passwords by specifying a password history.

## MFA (Multi-Factor Authentication)

- **Multi-Factor Authentication (MFA)**: An additional layer of security for your AWS account that requires users to provide two or more forms of authentication when signing in. MFA = something you know (password) + something you have (MFA device).
- MFA can be enabled for the root user and IAM users. It is very important to enable MFA for them.
- Types of MFA devices:
  - Virtual MFA devices: Software-based applications that generate time-based one-time passwords (TOTP) on smartphones or other devices (e.g., Google Authenticator, Authy).
  - Hardware MFA devices: Physical devices that generate TOTP codes (e.g., Gemalto, Yubico).
  - SMS MFA: Sends a one-time code via SMS to a registered mobile phone number (not recommended for high-security environments).

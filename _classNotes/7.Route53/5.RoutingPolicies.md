# Routing Policies

- Defines how Route 53 responds to DNS queries.
- Don't get confused with the word "routing" here.
  - It does NOT mean routing traffic like a load balancer.
  - DNS does not route traffic, it only responds to DNS queries.
- Route 53 supports several routing policies:
  - Simple
  - Weighted
  - Latency-based
  - Failover
  - Geolocation
  - Multivalue answer
  - Geoproximity (Traffic Flow feature only)

## Simple Routing

- Tipically, route traffic to a single resource.
- Can specify multiple values for the same record, and Route 53 will return all values in response to DNS queries.
  - If multiple values are returned, the client can choose which one to use.
- When alias is enabled, Route 53 responds with the IP address of the AWS resource (e.g., ELB, CloudFront).
  - We must choose only one AWS resource when alias is enabled.
- No health checks are associated with simple routing.

## Weighted Routing

- Control the distribution of traffic to multiple resources.
- Each resource (record) is assigned a weight (0 to 255).
- Route 53 routes traffic based on the weights assigned.
  - traffic (%) = weight of resource / sum of weights of all resources
  - E.g., if Resource A has a weight of 70 and Resource B has a weight of 30, then 70% of the traffic will be routed to Resource A and 30% to Resource B.
- DNS records must have the same name and type.
- Health checks can be associated with weighted routing.
- Use cases:
  - Load balancing between regions.
  - Testing new versions of an application (can route a small percentage of traffic to the new version).
- Assign 0 weight to a resource to temporarily remove it from service without deleting the record.
- If all resources are 0 weighted, Route 53 returns all resources with equal probability.

# Gateway Load Balancer (GWLB)

- Gateway Load Balancer (GWLB) (v2 - new generation 2020): Operates at the network layer (Layer 3: IP packets)
- Makes it easy to deploy, scale, and manage third-party virtual appliances (firewalls, intrusion detection and prevention systems, deep packet inspection systems) in the cloud.
  - Called fleet of 3rd party appliances.
- Combines a transparent network gateway (using GENEVE protocol on port 6081) and a load balancer.

## How it works

1. Traffic from your VPC is routed to the GWLB using a VPC route table (like a NAT gateway).
2. The GWLB distributes the traffic to the virtual appliances in the fleet (using a target group).
3. The appliances process the traffic and send it back to the GWLB, if approved.
4. The GWLB then routes the traffic back to the VPC.

- The power of GWLB is to analyze all the traffic in your VPC, not just HTTP/HTTPS or TCP/UDP.
- Combines two functions:
  - **Load Balancing**: Distributes incoming traffic across multiple virtual appliances to ensure high availability and reliability.
  - **Transparent Network Gateway**: Acts as a gateway that forwards traffic to the virtual appliances without modifying the source or destination IP addresses.

## Target Groups

- Types of target groups:
  - `EC2 Instances`: Routes traffic to EC2 instances using their instance ID.
    - Can be managed by an Auto Scaling group - GENEVE
  - `IP addresses`: Routes traffic to IP addresses.
    - Can be used for on-premises resources or resources outside the VPC - GENEVE
    - Must be private IPs within the VPC CIDR range.

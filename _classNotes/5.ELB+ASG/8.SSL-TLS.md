# SSL/TLS Certificates

- **SSL Certificate** allows traffic between your clients and your load balancer to be encrypted in transit (in-flight encryption).
- `SSL` (Secure Sockets Layer) is the predecessor to `TLS` (Transport Layer Security). TLS is more secure and efficient than SSL. However, the term "SSL" is still commonly used to refer to both SSL and TLS protocols.
- SSL/TLS certificates are issued by trusted entities known as Certificate Authorities (CAs).
  - Examples of CAs include GoDaddy, Let's Encrypt, DigiCert, and GlobalSign.
- SSL/TLS has expiration dates and must be renewed periodically to maintain secure communications.
- We can attach SSL/TLS certificates to our load balancers to enable secure communication between clients and the load balancer.

## SSL/TLS on Load Balancers

1. Users send requests to the load balancer over HTTPS (port 443) encrypted with SSL/TLS.
2. The load balancer decrypts the incoming SSL/TLS traffic and forwards it to the backend instances in plain text.
3. Responses from the backend instances are sent back to the load balancer, which re-encrypts the traffic before sending it to the clients.

- The load balancer uses an X.509 certificate to handle the SSL/TLS encryption and decryption process.
- Certificates can be managed using AWS Certificate Manager (ACM) or imported from external CAs.
  - Also can use IAM to manage SSL/TLS certificates. But not recommended for production use.
- HTTPS listener:
  - A default certificate is required for the HTTPS listener on the load balancer.
  - You can add an optional list of certificates to support multiple domains (SNI - Server Name Indication).

## SNI (Server Name Indication)

- SNI solves the problem of loading multiple SSL certificates on a single IP address (web server) to serve multiple secure (HTTPS) websites.
- It's a newer protocol that allows the client to indicate the hostname it is trying to connect to at the start of the SSL/TLS handshake.
- This allows the server (load balancer) to present the correct SSL/TLS certificate based on the requested hostname.
- Note: only works for ALB and NLB (newer generation), CloudFront. Not supported by CLB (classic).
- Example: If you have two domains, `example1.com` and `example2.com`, both hosted on the same load balancer, SNI allows the load balancer to present the correct SSL certificate for each domain based on the hostname requested by the client.

## Elastic Load Balancer (ELB) Types and SSL/TLS

- **Classic Load Balancer (CLB)**:
  - Requires a single SSL certificate per load balancer.
  - Must use multiple CLBs to support multiple domains with different SSL certificates.
- **Application Load Balancer (ALB)**:
  - Supports multiple listeners with different SSL certificates.
  - Can use SNI to serve multiple domains with different SSL certificates on a single ALB.
- **Network Load Balancer (NLB)**:
  - Supports TLS listeners and can use SNI to serve multiple domains with different SSL certificates on a single NLB.

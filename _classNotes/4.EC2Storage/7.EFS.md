# EFS (Elastic File System)

- Fully managed, scalable, and elastic NFS (Network File System) file system that can be mounted on multiple EC2 instances.
- Works with AWS services like EC2, Lambda, and ECS in multiple Availability Zones.
- Highly available and durable, with data stored across multiple Availability Zones.
  - Using in one AZ is good for dev/test, but not for prod.
- Expensive (3x the cost of standard gp2 EBS volumes)
- Pay-per-use pricing model based on the amount of data stored and the amount of data transferred.
- Use cases:
  - Content management and web serving (Ex: WordPress, Drupal)
  - Big data and analytics (Ex: Hadoop, Spark)
  - Dev/test environments (Ex: Jenkins, GitLab)
  - Media processing workflows (Ex: Transcoding, Rendering)
- Uses NFSv4 and NFSv4.1 protocols.
- Uses security groups and IAM policies for access control.
- Compatible with Linux-based AMIs.
- Encryption at rest using AWS Key Management Service (KMS) is supported.
- POSIX file system (~Linux) that has a standard file API.
- File system scales automatically, pay-per-use, no capacity planning required.

## Performance Classes

- EFS scale
  - 1000s of concurrent NFS clients, 10+ GB/s throughput.
  - Grow to Petabytes (PB) scale network file system, automatically.
- Performance modes (set at file system creation)
  - General Purpose: Default mode, low latency, and high throughput. Ex: Web serving, content management
  - Max I/O: Higher throughput, but higher latencies, for large-scale workloads. Ex: Big data and analytics
- Throughput modes
  - Bursting: Default mode, allows for bursts of high throughput. 1 TB = 50 MiB/s + burst up to 100 MiB/s.
  - Provisioned: Allows you to provision a specific throughput level. 1 GiB/s for 1 TB of storage.
  - Elastic: Automatically adjusts throughput based on the amount of data stored.
    - Up to 3 GiB/s for reads and 1 GiB/s for writes.
    - Ideal for unpredictable workloads with varying throughput requirements.

## Storage Classes

- Storage tiers (lifecycle management feature - move file after N days)
  - Standard: Default storage class, suitable for most workloads.
  - Infrequent Access (IA): Lower-cost storage class for files that are not accessed frequently.
  - Archive: Lowest-cost storage class for files that are rarely accessed. 50% lower cost than Standard.
- Can implement lifecycle policies to automatically move files between storage classes based on access patterns.
- Availability and durability
  - Standard: multi-AZ, great for prod.
  - One-Zone: single-AZ, great for dev, backup enabled by default, compatible with IA (EFS One-Zone-IA).
- Over 90% in cost savings compared to traditional file systems.

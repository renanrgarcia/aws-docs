# Read replicas & Multi-AZ

## Read Replicas

- Read replicas are used to improve read performance and offload read traffic from the primary database instance.
- You can create up to 15 read replicas for a given source DB instance.
  - Within AZ, cross-AZ or cross-region
- Replication is asynchronous (there might be a lag between the primary and the replica == eventual consistency).
- They can be promoted to become standalone databases (useful for DR or scaling out writes).
- Applications must update their connection strings to leverage read replicas.

### Use cases

- There's a production database that handles both reads and writes.
- You want to run a reporting or analytics workload that requires heavy read operations.
  - Async replicates to a RDS DB read replica
- Production DB is unaffected
- Read replicas are used for SELECT only kind of statements (not INSERT, UPDATE, DELETE)

### Network cost

- In AWS there's a cost for data transfer between AZs.
- For RDS:
  - Same Region, different AZ: free (e.g., us-east-1a to us-east-1b)
  - Cross Region: charged (e.g., us-east-1 to eu-west-2)

## Multi-AZ (Disaster Recovery)

- Synchronous replication to a standby instance in a different AZ (same region).
  - E.g., primary in us-east-1a, standby in us-east-1b. So all the data is synchronously replicated to the standby.
- One DNS endpoint, which points to the primary instance (automatic failover).
- Increases availability and durability.
- Failover in case of:
  - AZ failure
  - DB instance failure
  - Storage failure
- No manual intervention required (automatic failover).
- Not used for read scaling (the standby is not accessible).
- Note: Read replicas can be set up in a Multi-AZ for DR purposes.

### From single-AZ to Multi-AZ

- You can convert a single-AZ RDS instance to a Multi-AZ deployment.
  - Zero downtime operation
  - Just click "Modify" and select Multi-AZ
- Internally:
  - Creates a snapshot of the primary
  - Restores the snapshot to a new instance in another AZ
  - Synchronization is established between primary and standby
